<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/js/main.js?ver=1.0"></script>

<script>
var etc = {
  btnReadNoteClicked: function() {
    console.log("btnReadNoteClicked(): 1");
    
    var url = "/etc/select";
    var param = {
      id:     0, 
      title:  $("#title").val(), 
      content:""
    };
    
    etc.ajaxPostJson(url, param, function(jsonStr) {
      console.log("btnReadNoteClicked(): 2");
      console.log(jsonStr);
      
      $.each(jsonData, function(index, item) {
        $("#content").val(item["content"]);
      });
    });
  },
  
  //============================================================
  // 기능: ajax POST 형태로 loc를 호출하여 성공한 경우 callbackFunc를 호출한다.      
  //============================================================
  ajaxPostJson: function(loc, param, callbackSuccess, callbackFail) {
     // window.open(loc);
     // window.location.href = loc; 
    console.log(">>> ajaxPostJson(): 1---");
    console.log(">>> ajaxPostJson(): loc=" + loc);
    console.log(param);
    
    alert("1");      
    $.ajax({ 
      type : "POST",
      url : loc,
      dataType : "json", 
      data : JSON.stringify(param),   // (X) encodeURIComponent(JSON.stringify(param)), 
      contentType: "application/json; charset=UTF-8",
      success : function(jsonParam) {
        console.log(">>> ajaxPostJson(): success 1");
        console.log(jsonParam);
        
        if(main.isNotEmpty(callbackSuccess)) {
          console.log(">>> ajaxPostJson(): success 2");
          callbackSuccess(jsonParam);
        }
        
        console.log(">>> ajaxPostJson(): success 3");
      },
//       fial: function(jsonParam) {
//        console.log(">>> ajaxPostJson(): fail 1");
//        console.log(jsonParam);
//        
//        if(main.isNotEmpty(callbackFail)) {
//          console.log(">>> ajaxGetJson(): fail 2");
//          callbackFail(jsonParam);
//        }
//        
//        console.log(">>> ajaxPostJson(): fail 3");
//       },
    }); 
  },  
};

</script>

<title>index</title>
<body>
  <h1>노트 CRUD</h1>
  
  <form name="etcNote" id="etcNote" action="#" method="POST">
  제목: <select name="title" id="title">
    <option value="Term Of Serrvice" selected="selected">이용약관</option>
    <option value="Privacy Policy">개인정보처리방침</option>
  </select><br />
  내용: <textarea name="content" id="content" rows="10" cols="80"></textarea> <br />
  <button name="btnReadNote"   id="btnReadNote"   onclick="etc.btnReadNoteClicked();">불러오기</button>
  <button name="btnInsertNote" id="btnInsertNote" onclick="etc.btnInsertNoteClicked();">추가</button>
  <button name="btnUpdateNote" id="btnReadNote"   onclick="etc.btnUpdateNoteClicked();">수정</button>
  <button name="btnDeleteNote" id="btnReadNote"   onclick="etc.btnDeleteNoteClicked();">삭제</button>
  </form>
</body>
</html>
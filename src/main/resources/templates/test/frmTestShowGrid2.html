<html>

<head lang="en">
<meta charset="UTF-8">

<!-- TOAST grid를 위한 CDN -->
<link rel="stylesheet" href="https://uicdn.toast.com/tui-grid/latest/tui-grid.css" />
<script src="https://uicdn.toast.com/tui-grid/latest/tui-grid.js"></script>

<!-- TOAST pagenation 시 필요 -->
<!-- <link rel="stylesheet" href="https://uicdn.toast.com/tui-pagination/dist/tui-pagination.css" /> -->
<!-- <script type="text/javascript" src="https://uicdn.toast.com/tui.pagination/v3.4.0/tui-pagination.js"></script> -->

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/js/main.js?ver=1.01"></script>
  
<script>
    
  // 기능: 문서의 모든 콘텐츠(images, script, css, etc)가 로드된 후 발생하는 이벤트
  window.onload = function() {
    // ...
  };

  var gridQna = null;
  
  // 기능: addEventListener를 사용하여 DOMContentLoaded 이벤트 발생시 showGrid() 실행.
  document.addEventListener("DOMContentLoaded", function() {
    // ...
    
    var kind = "QNA";
    var actionInsert = "INSERT";
    var actionDelete = "DELETE";
    
    var columns = [
      {header: "아이디",     name: "id",       width: 100,  height: 100                    },
      {header: "닉네임",     name: "nickname", width: 100                   },
      {header: "번호",      name: "no",       width: 100, align: "center"   },

      {header: "사진",      name: "img1", width: 100, align: "center", formatter: function() {
        return "<img src='/images/11_html_m4956639b.jpg' width=100>";
      }},
      
      {header: "카테고리ID.", name: "cateId",   width: 110                   },
    //{header: "카테고리",    name: "cate",     width: 0                     },
      {header: "공개여부",    name: "isPub",    width: 100, align: "center"  }, 
      {header: "제목",      name: "title",    width: 100                   },
      {header: "질문내용",    name: "q",        width: 300                   },
      {header: "답변내용",    name: "a",        width: 300                   },
    //{header: "작성자ID",   name: "cUser",    width: 20                    },
      {header: "aaUser",   name: "aaUser",   width: 20                    },
      {header: "cuser",    name: "cuser",    width: 20                    },
      {header: "작성일",     name: "mdate",    width: 20                    },
      
      {header: "수정",      name: "btnUpdate", width: 20, align: "center", formatter: function() {
        // this.index, this.item, this.list 에 모두 접근 가능
        // 단, this.index는 pageOptions: { perPage: ... },를 사용하는 경우 동작하지 않는다.
        
        return "<button class='AXButton' onclick='callbackButtonClicked(\"" 
        + kind + "\", \"" + actionInsert + "\", \"" 
        + this.index + "\");'>수정</button>"; 
      }},
      
      {header: "삭제",      name: "btnDelete", width: 20, align: "center", formatter: function() {
        return "<button class='AXButton' onclick='callbackButtonClicked(\"" 
        + kind + "\", \"" + actionDelete + "\", \"" 
        + this.index + "\");'>삭제</button>"; 
      }}
    ];

    // TOAST Grid 생성    
    gridQna = main.showToastGrid("/test/getData4Toast3", "gridQNA", columns);

    // mousedown Event
    gridQna.on('mousedown', function(ev) {
       // 클릭된 위치의 Row 정보 읽기 & row의 "id", "title"갑 log에 출력 
       var rowInfo = gridQna.getRow(ev.rowKey); 
      console.log("id: " + rowInfo["id"] + ", title: " + rowInfo["title"]);
    });    
    
    showTestGrid();
  });
  
  callbackButtonClicked = function(kind, action, index) {
    console.log("kind: " + kind + ", action: " + action + ", index: " + index);
    console.log("id: " + gridQna.getValue(index, "id")); 
  };
  

  // --------------------------------
  var showTestGrid = function() {
    var url = "/test/getData4Toast2";

    var options = {
      el: document.getElementById('gridTest'),
      columns: [
        {
          header: "이름",
          name: "name"
        },
        {
          header: "나이",
          name: "value",
          editor: "text"
        }
      ],
      data: {
        contentType: "application/json",
        api: {
          readData: { 
            url: url, 
            method: "GET" 
          }
        }
      }
    };

    // GRID 를 생성한다.
    var grid = new tui.Grid(options);
  }
  
</script>
  
</head>
<body>
	<div id="gridQNA"></div> <br />
    <div id="gridTest"></div> <br />
</body>
</html>
